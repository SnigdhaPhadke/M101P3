import base64
code=b'CmltcG9ydCBweW1vbmdvCmltcG9ydCB1cmxsaWIucmVxdWVzdCwgdXJsbGliLmVycm9yLCB1cmxsaWIucGFyc2UKaW1wb3J0IHVybGxpYi5yZXF1ZXN0LCB1cmxsaWIucGFyc2UsIHVybGxpYi5lcnJvcgppbXBvcnQgaHR0cC5jb29raWVqYXIKaW1wb3J0IHJhbmRvbQppbXBvcnQgcmUKaW1wb3J0IHN0cmluZwppbXBvcnQgc3lzCmltcG9ydCBnZXRvcHQKCiMgdGhpcyBpcyBhIHZhbGlkYXRpb24gcHJvZ3JhbSB0byBtYWtlIHN1cmUgdGhhdCB0aGUgYmxvZyB3b3JrcyBjb3JyZWN0bHkuCiMgSWYgeW91IGFyZSByZWFkaW5nIHRoaXMgaW4gY2xlYXIgdGV4dCwgeW91IGFyZSBwcm9iYWJseSB2aW9sYXRpbmcgdGhlIGhvbm9yIGNvZGUKCiMgaW5pdCB0aGUgZ2xvYmFsIGNvb2tpZSBqYXIKY2ogPSBodHRwLmNvb2tpZWphci5Db29raWVKYXIoKQojIGRlY2xhcmUgdGhlIHZhcmlhYmxlcyB0byBjb25uZWN0IHRvIGRiCmNvbm5lY3Rpb24gPSBOb25lCmRiID0gTm9uZQp3ZWJob3N0ID0gImxvY2FsaG9zdDo4MDgyIgptb25nb3N0ciA9ICJtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3IgpkYl9uYW1lID0gImJsb2ciCgojIHRoaXMgc2NyaXB0IHdpbGwgY2hlY2sgdGhhdCBob21ld29yayAzLjIgaXMgY29ycmVjdAoKIyBtYWtlcyBhIGxpdHRsZSBzYWx0CmRlZiBtYWtlX3NhbHQobik6CiAgICBzYWx0ID0gIiIKICAgIGZvciBpIGluIHJhbmdlKG4pOgogICAgICAgIHNhbHQgPSBzYWx0ICsgcmFuZG9tLmNob2ljZShzdHJpbmcuYXNjaWlfbGV0dGVycykKICAgIHJldHVybiBzYWx0CgoKIyB0aGlzIGlzIGEgdmFsaWRhdGlvbiBwcm9ncmFtIHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBibG9nIHdvcmtzIGNvcnJlY3RseS4KCmRlZiBjcmVhdGVfdXNlcih1c2VybmFtZSwgcGFzc3dvcmQpOgogICAgCiAgICBnbG9iYWwgY2oKCiAgICB0cnk6CiAgICAgICAgcHJpbnQoIlRyeWluZyB0byBjcmVhdGUgYSB0ZXN0IHVzZXIgIiwgdXNlcm5hbWUpCiAgICAgICAgdXJsID0gImh0dHA6Ly97MH0vc2lnbnVwIi5mb3JtYXQod2ViaG9zdCkKCiAgICAgICAgZGF0YSA9IHVybGxpYi5wYXJzZS51cmxlbmNvZGUoWygiZW1haWwiLCIiKSwoInVzZXJuYW1lIix1c2VybmFtZSksICgicGFzc3dvcmQiLHBhc3N3b3JkKSwgKCJ2ZXJpZnkiLHBhc3N3b3JkKV0pLmVuY29kZSgidXRmLTgiKQogICAgICAgIHJlcXVlc3QgPSB1cmxsaWIucmVxdWVzdC5SZXF1ZXN0KHVybD11cmwsIGRhdGE9ZGF0YSkKICAgICAgICBvcGVuZXIgPSB1cmxsaWIucmVxdWVzdC5idWlsZF9vcGVuZXIodXJsbGliLnJlcXVlc3QuSFRUUENvb2tpZVByb2Nlc3NvcihjaikpCiAgICAgICAgZiA9IG9wZW5lci5vcGVuKHJlcXVlc3QpCgogICAgICAgIHVzZXJzID0gZGIudXNlcnMKICAgICAgICAjIGNoZWNrIHRoYXQgdGhlIHVzZXIgaXMgaW4gdXNlcnMgY29sbGVjdGlvbgogICAgICAgIHVzZXIgPSB1c2Vycy5maW5kX29uZSh7J19pZCc6dXNlcm5hbWV9KQogICAgICAgIGlmICh1c2VyID09IE5vbmUpOgogICAgICAgICAgICBwcmludCgiQ291bGQgbm90IGZpbmQgdGhlIHRlc3QgdXNlciAiLCB1c2VybmFtZSwgImluIHRoZSB1c2VycyBjb2xsZWN0aW9uLiIpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIHByaW50KCJGb3VuZCB0aGUgdGVzdCB1c2VyICIsIHVzZXJuYW1lLCAiIGluIHRoZSB1c2VycyBjb2xsZWN0aW9uIikKCiAgICAgICAgIyBjaGVjayB0aGF0IHRoZSB1c2VyIGhhcyBiZWVuIGJ1aWx0CiAgICAgICAgcmVzdWx0ID0gZi5yZWFkKCkuZGVjb2RlKCJ1dGYtOCIpCiAgICAgICAgZXhwciA9IHJlLmNvbXBpbGUoIldlbGNvbWVccysiKyB1c2VybmFtZSkKICAgICAgICBpZiBleHByLnNlYXJjaChyZXN1bHQpOgogICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIAogICAgICAgIHByaW50KCJXaGVuIHdlIHRyaWVkIHRvIGNyZWF0ZSBhIHVzZXIsIGhlcmUgaXMgdGhlIG91dHB1dCB3ZSBnb3RcbiIpCiAgICAgICAgcHJpbnQocmVzdWx0KQogICAgICAgIAogICAgICAgIHJldHVybiBGYWxzZQogICAgZXhjZXB0OgogICAgICAgIHByaW50KCJ0aGUgcmVxdWVzdCB0byAiLCB1cmwsICIgZmFpbGVkLCBzbyB5b3VyIGJsb2cgbWF5IG5vdCBiZSBydW5uaW5nLiIpCiAgICAgICAgcmFpc2UKICAgICAgICByZXR1cm4gRmFsc2UKCgpkZWYgdHJ5X3RvX2xvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCk6CgogICAgdHJ5OgogICAgICAgIHByaW50KCJUcnlpbmcgdG8gbG9naW4gZm9yIHRlc3QgdXNlciAiLCB1c2VybmFtZSkKICAgICAgICB1cmwgPSAiaHR0cDovL3swfS9sb2dpbiIuZm9ybWF0KHdlYmhvc3QpCgogICAgICAgIGRhdGEgPSB1cmxsaWIucGFyc2UudXJsZW5jb2RlKFsoInVzZXJuYW1lIix1c2VybmFtZSksICgicGFzc3dvcmQiLHBhc3N3b3JkKV0pLmVuY29kZSgidXRmLTgiKQogICAgICAgIHJlcXVlc3QgPSB1cmxsaWIucmVxdWVzdC5SZXF1ZXN0KHVybD11cmwsIGRhdGE9ZGF0YSkKICAgICAgICBvcGVuZXIgPSB1cmxsaWIucmVxdWVzdC5idWlsZF9vcGVuZXIodXJsbGliLnJlcXVlc3QuSFRUUENvb2tpZVByb2Nlc3NvcihjaikpCiAgICAgICAgZiA9IG9wZW5lci5vcGVuKHJlcXVlc3QpCgogICAgICAgICMgY2hlY2sgZm9yIHN1Y2Nlc3NmdWwgbG9naW4KICAgICAgICByZXN1bHQgPSBmLnJlYWQoKS5kZWNvZGUoInV0Zi04IikKICAgICAgICBleHByID0gcmUuY29tcGlsZSgiV2VsY29tZVxzKyIrIHVzZXJuYW1lKQogICAgICAgIGlmIGV4cHIuc2VhcmNoKHJlc3VsdCk6CiAgICAgICAgICAgIHJldHVybiBUcnVlCgogICAgICAgIHByaW50KCJXaGVuIHdlIHRyaWVkIHRvIGxvZ2luLCBoZXJlIGlzIHRoZSBvdXRwdXQgd2UgZ290XG4iKQogICAgICAgIHByaW50KHJlc3VsdCkKICAgICAgICByZXR1cm4gRmFsc2UKICAgIGV4Y2VwdDoKICAgICAgICBwcmludCgidGhlIHJlcXVlc3QgdG8gIiwgdXJsLCAiIGZhaWxlZCwgc28geW91ciBibG9nIG1heSBub3QgYmUgcnVubmluZy4iKQogICAgICAgIHJldHVybiBGYWxzZQoKCmRlZiBhZGRfYmxvZ19wb3N0KHRpdGxlLHBvc3QsdGFncyk6CgogICAgdHJ5OgogICAgICAgIHByaW50KCJUcnlpbmcgdG8gc3VibWl0IGEgcG9zdCB3aXRoIHRpdGxlICIsIHRpdGxlKQogICAgICAgIGRhdGEgPSB1cmxsaWIucGFyc2UudXJsZW5jb2RlKFsoImJvZHkiLHBvc3QpLCAoInN1YmplY3QiLHRpdGxlKSwgKCJ0YWdzIix0YWdzKV0pLmVuY29kZSgidXRmLTgiKQogICAgICAgIHVybCA9ICJodHRwOi8vezB9L25ld3Bvc3QiLmZvcm1hdCh3ZWJob3N0KQogICAgICAgIHJlcXVlc3QgPSB1cmxsaWIucmVxdWVzdC5SZXF1ZXN0KHVybD11cmwsIGRhdGE9ZGF0YSkKICAgICAgICBjai5hZGRfY29va2llX2hlYWRlcihyZXF1ZXN0KQogICAgICAgIG9wZW5lciA9IHVybGxpYi5yZXF1ZXN0LmJ1aWxkX29wZW5lcigpCiAgICAgICAgZiA9IG9wZW5lci5vcGVuKHJlcXVlc3QpCgogICAgICAgICMgY2hlY2sgZm9yIHN1Y2Nlc3NmdWwgbG9naW4KICAgICAgICByZXN1bHQgPSBmLnJlYWQoKS5kZWNvZGUoInV0Zi04IikKICAgICAgICBleHByID0gcmUuY29tcGlsZSh0aXRsZSArICIuKyIgKyBwb3N0LCByZS5ET1RBTEwpCgogICAgICAgIGlmIGV4cHIuc2VhcmNoKHJlc3VsdCk6CiAgICAgICAgICAgIHJldHVybiBUcnVlCgogICAgICAgIHByaW50KCJXaGVuIHdlIHRyaWVkIHRvIHBvc3QsIGhlcmUgaXMgdGhlIG91dHB1dCB3ZSBnb3RcbiIpCiAgICAgICAgcHJpbnQocmVzdWx0KQogICAgICAgIHJldHVybiBGYWxzZQoKICAgIGV4Y2VwdDoKICAgICAgICBwcmludCgidGhlIHJlcXVlc3QgdG8gIiwgdXJsLCAiIGZhaWxlZCwgc28geW91ciBibG9nIG1heSBub3QgYmUgcnVubmluZy4iKQogICAgICAgIHJhaXNlCgogICAgICAgIHJldHVybiBGYWxzZQoKZGVmIGFkZF9ibG9nX2NvbW1lbnQodGl0bGUscG9zdCk6CgogICAgdHJ5OgogICAgICAgIHByaW50KCJUcnlpbmcgdG8gc3VibWl0IGEgYmxvZyBjb21tZW50IGZvciBwb3N0IHdpdGggdGl0bGUiLCB0aXRsZSkKICAgICAgICB1cmwgPSAiaHR0cDovL3swfS9uZXdjb21tZW50Ii5mb3JtYXQod2ViaG9zdCkKICAgICAgICAKICAgICAgICBkb2MgPSB7fQogICAgICAgIGNoZWNrX21vbmdvX2Zvcl9wb3N0KHRpdGxlLCBwb3N0LCBkb2MpCgogICAgICAgIHBlcm1hbGluayA9IGRvY1snZG9jJ11bJ3Blcm1hbGluayddCgogICAgICAgIGNvbW1lbnRfbmFtZSA9IG1ha2Vfc2FsdCgxMikKICAgICAgICBjb21tZW50X2JvZHkgPSBtYWtlX3NhbHQoMTIpCgogICAgICAgIGRhdGEgPSB1cmxsaWIucGFyc2UudXJsZW5jb2RlKFsoImNvbW1lbnROYW1lIixjb21tZW50X25hbWUpLCAoImNvbW1lbnRCb2R5Iixjb21tZW50X2JvZHkpLCAoInBlcm1hbGluayIscGVybWFsaW5rKV0pLmVuY29kZSgidXRmLTgiKQogICAgICAgIHJlcXVlc3QgPSB1cmxsaWIucmVxdWVzdC5SZXF1ZXN0KHVybD11cmwsIGRhdGE9ZGF0YSkKICAgICAgICBjai5hZGRfY29va2llX2hlYWRlcihyZXF1ZXN0KQogICAgICAgIG9wZW5lciA9IHVybGxpYi5yZXF1ZXN0LmJ1aWxkX29wZW5lcigpCiAgICAgICAgZiA9IG9wZW5lci5vcGVuKHJlcXVlc3QpCgogICAgICAgICMgY2hlY2sgZm9yIHN1Y2Nlc3NmdWwgYWRkaXRpb24gb2YgY29tbWVudCBvbiBwYWdlCiAgICAgICAgcmVzdWx0ID0gZi5yZWFkKCkuZGVjb2RlKCJ1dGYtOCIpCiAgICAgICAgZXhwciA9IHJlLmNvbXBpbGUodGl0bGUgKyAiLisiICsgcG9zdCwgcmUuRE9UQUxMKQoKICAgICAgICBpZiBub3QgZXhwci5zZWFyY2gocmVzdWx0KToKICAgICAgICAgICAgcHJpbnQoIldoZW4gd2UgdHJpZWQgdG8gZmluZCB0aGUgY29tbWVudCB3ZSBwb3N0ZWQgYXQgdGhlICAiLCB1cmwsICIgaGVyZSBpcyB3aGF0IHdlIGdvdCIpCiAgICAgICAgICAgIHByaW50KHJlc3VsdCkKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgoKICAgICAgICAjIGNoZWNrIGZvciBzdWNjZXNzZnVsIGFkZGl0aW9uIG9mIGNvbW1lbnQuLnJldHJpZXZlIHRoZSBkb2MgYWdhaW4KICAgICAgICBpZihub3QgY2hlY2tfbW9uZ29fZm9yX3Bvc3QodGl0bGUsIHBvc3QsIGRvYykpOgogICAgICAgICAgICBwcmludCgiQ291bGQgbm90IGZpbmQgY29tbWVudCBpbiBkYXRhYmFzZSIpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIAogICAgICAgIGZvdW5kID0gRmFsc2UKICAgICAgICBpZiAoJ2NvbW1lbnRzJyBpbiBkb2NbJ2RvYyddKToKICAgICAgICAgICAgZm9yIGNvbW1lbnQgaW4gZG9jWydkb2MnXVsnY29tbWVudHMnXToKICAgICAgICAgICAgICAgIGlmIChjb21tZW50Wydib2R5J10gPT0gY29tbWVudF9ib2R5IGFuZCBjb21tZW50WydhdXRob3InXSA9PSBjb21tZW50X25hbWUpOgogICAgICAgICAgICAgICAgICAgIGZvdW5kID0gVHJ1ZQoKICAgICAgICByZXR1cm4gZm91bmQKCiAgICBleGNlcHQ6CiAgICAgICAgcHJpbnQoInRoZSByZXF1ZXN0IHRvICIsIHVybCwgIiBmYWlsZWQsIHNvIHlvdXIgYmxvZyBtYXkgbm90IGJlIHJ1bm5pbmcuIikKICAgICAgICByYWlzZQoKICAgICAgICByZXR1cm4gRmFsc2UKCgojIGdyYWJzIHRoZSBibG9nIGluZGV4IGFuZCBjaGVja3MgdGhhdCB0aGUgcG9zdHMgYXBwZWFyIGluIHRoZSByaWdodCBvcmRlcgpkZWYgY2hlY2tfYmxvZ19pbmRleCh0aXRsZTEsIHRpdGxlMik6CgogICAgdHJ5OgogICAgICAgIHVybCA9ICJodHRwOi8vezB9LyIuZm9ybWF0KHdlYmhvc3QpCiAgICAgICAgcHJpbnQoIlRyeWluZyB0byBncmFiIHRoZSBibG9nIGhvbWUgcGFnZSBhdCB1cmwgIiwgdXJsKQogICAgICAgIHJlcXVlc3QgPSB1cmxsaWIucmVxdWVzdC5SZXF1ZXN0KHVybD11cmwpCiAgICAgICAgY2ouYWRkX2Nvb2tpZV9oZWFkZXIocmVxdWVzdCkKICAgICAgICBvcGVuZXIgPSB1cmxsaWIucmVxdWVzdC5idWlsZF9vcGVuZXIoKQogICAgICAgIGYgPSBvcGVuZXIub3BlbihyZXF1ZXN0KQoKICAgICAgICAjIGNoZWNrIGZvciBzdWNjZXNzZnVsIGxvZ2luCiAgICAgICAgcmVzdWx0ID0gZi5yZWFkKCkuZGVjb2RlKCJ1dGYtOCIpCiAgICAgICAgZXhwciA9IHJlLmNvbXBpbGUodGl0bGUyICsgIi4rIiArIHRpdGxlMiwgcmUuRE9UQUxMKQoKICAgICAgICBpZiBleHByLnNlYXJjaChyZXN1bHQpOgogICAgICAgICAgICByZXR1cm4gVHJ1ZQoKICAgICAgICBwcmludCgiV2hlbiB3ZSB0cmllZCB0byByZWFkIHRoZSBibG9nIGluZGV4IGF0ICIsIHVybCwgIiBoZXJlIGlzIHdoYXQgd2UgZ290IikKICAgICAgICBwcmludChyZXN1bHQpCiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZXhjZXB0OgogICAgICAgIHByaW50KCJ0aGUgcmVxdWVzdCB0byAiLCB1cmwsICIgZmFpbGVkLCBzbyB5b3VyIGJsb2cgbWF5IG5vdCBiZSBydW5uaW5nLiIpCiAgICAgICAgcmFpc2UKCiAgICAgICAgcmV0dXJuIEZhbHNlCgojIGNoZWNrIHRoYXQgYSBwYXJ0aWN1bGFyIGJsb2cgcG9zdCBpcyBpbiB0aGUgY29sbGVjdGlvbgpkZWYgY2hlY2tfbW9uZ29fZm9yX3Bvc3QodGl0bGUsIGJvZHksIGRvY3VtZW50KToKICAgIAogICAgcG9zdHMgPSBkYi5wb3N0cwogICAgdHJ5OgogICAgICAgIHBvc3QgPSBwb3N0cy5maW5kX29uZSh7J3RpdGxlJzp0aXRsZSwgJ2JvZHknOmJvZHl9KQogICAgICAgIGlmIChwb3N0IGlzIE5vbmUpOgogICAgICAgICAgICBwcmludCgiQ2FuJ3QgZmluZCBwb3N0IHdpdGggdGl0bGUgIiwgdGl0bGUsICIgaW4gY29sbGVjdGlvbiIpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIGRvY3VtZW50Wydkb2MnXSA9IHBvc3QKICAgICAgICByZXR1cm4gVHJ1ZQogICAgZXhjZXB0OgogICAgICAgIHByaW50KCJjYW4nIHF1ZXJ5IE1vbmdvREIuLmlzIGl0IHJ1bm5pbmc/IikKICAgICAgICByYWlzZQoKICAgICAgICByZXR1cm4gRmFsc2UKCiMgY29tbWFuZCBsaW5lIGFyZyBwYXJzaW5nIHRvIG1ha2UgZm9sa3MgaGFwcHkgd2hvIHdhbnQgdG8gcnVuIGF0IG1vbmdvbGFicyBvciBtb25nb2hxCiMgdGhpcyBmdW5jdGlvbnMgdXNlcyBnbG9iYWwgdmFycyB0byBjb21tdW5pY2F0ZS4gZm9yZ2l2ZSBtZS4KZGVmIGFyZ19wYXJzaW5nKGFyZ3YpOgoKICAgIGdsb2JhbCB3ZWJob3N0CiAgICBnbG9iYWwgbW9uZ29zdHIKICAgIGdsb2JhbCBkYl9uYW1lCgogICAgdHJ5OgogICAgICAgIG9wdHMsIGFyZ3MgPSBnZXRvcHQuZ2V0b3B0KGFyZ3YsICItcDotbTotZDoiKQogICAgZXhjZXB0IGdldG9wdC5HZXRvcHRFcnJvcjoKICAgICAgICBwcmludCgidXNhZ2UgdmFsaWRhdGUucHkgLXAgd2ViaG9zdCAtbSBtb25nb0Nvbm5lY3RTdHJpbmcgLWQgZGF0YWJhc2VOYW1lIikKICAgICAgICBwcmludCgiXHR3ZWJob3N0IGRlZmF1bHRzIHRvIHswfSIuZm9ybWF0KHdlYmhvc3QpKQogICAgICAgIHByaW50KCJcdG1vbmdvQ29ubmVjdGlvblN0cmluZyBkZWZhdWx0IHRvIHswfSIuZm9ybWF0KG1vbmdvc3RyKSkKICAgICAgICBwcmludCgiXHRkYXRhYmFzZU5hbWUgZGVmYXVsdHMgdG8gezB9Ii5mb3JtYXQoZGJfbmFtZSkpCiAgICAgICAgc3lzLmV4aXQoMikKICAgIGZvciBvcHQsIGFyZyBpbiBvcHRzOgogICAgICAgIGlmIChvcHQgPT0gJy1oJyk6CiAgICAgICAgICAgIHByaW50KCJ1c2FnZSB2YWxpZGF0ZS5weSAtcCB3ZWJob3N0IC1tIG1vbmdvQ29ubmVjdFN0cmluZyAtZCBkYXRhYmFzZU5hbWUiKQogICAgICAgICAgICBzeXMuZXhpdCgyKQogICAgICAgIGVsaWYgb3B0IGluICgiLXAiKToKICAgICAgICAgICAgd2ViaG9zdCA9IGFyZwogICAgICAgICAgICBwcmludCgiT3ZlcnJpZGluZyBIVFRQIGhvc3QgdG8gYmUgIiwgd2ViaG9zdCkKICAgICAgICBlbGlmIG9wdCBpbiAoIi1tIik6CiAgICAgICAgICAgIG1vbmdvc3RyID0gYXJnCiAgICAgICAgICAgIHByaW50KCJPdmVycmlkaW5nIE1vbmdvREIgY29ubmVjdGlvbiBzdHJpbmcgdG8gYmUgIiwgbW9uZ29zdHIpCiAgICAgICAgZWxpZiBvcHQgaW4gKCItZCIpOgogICAgICAgICAgICBkYl9uYW1lID0gYXJnCiAgICAgICAgICAgIHByaW50KCJPdmVycmlkaW5nIE1vbmdvREIgZGF0YWJhc2UgdG8gYmUgIiwgZGJfbmFtZSkKICAgICAgICAgICAgCgoKIyBtYWluIHNlY3Rpb24gb2YgdGhlIGNvZGUKZGVmIG1haW4oYXJndik6CiAgICAgICAgICAgIAogICAgYXJnX3BhcnNpbmcoYXJndikKICAgIGdsb2JhbCBjb25uZWN0aW9uCiAgICBnbG9iYWwgZGIKCiAgICBwcmludCgiV2VsY29tZSB0byB0aGUgSFcgMy4yIGFuZCBIVyAzLjMgdmFsaWRhdGlvbiB0ZXN0ZXIiKQoKICAgICMgY29ubmVjdCB0byB0aGUgZGIgKG1vbmdvc3RyIHdhcyBzZXQgaW4gYXJnX3BhcnNpbmcpCiAgICBjb25uZWN0aW9uID0gcHltb25nby5Nb25nb0NsaWVudChtb25nb3N0cikKICAgIGRiID0gY29ubmVjdGlvbltkYl9uYW1lXQogICAgICAgIAogICAgdXNlcm5hbWUgPSBtYWtlX3NhbHQoNykKICAgIHBhc3N3b3JkID0gbWFrZV9zYWx0KDgpCgogICAgICMgdHJ5IHRvIGNyZWF0ZSB1c2VyCgogICAgaWYgKGNyZWF0ZV91c2VyKHVzZXJuYW1lLCBwYXNzd29yZCkpOgogICAgICAgIHByaW50KCJVc2VyIGNyZWF0aW9uIHN1Y2Nlc3NmdWwuICIpCiAgICAgICAgICMgdHJ5IHRvIGxvZ2luCiAgICAgICAgaWYgKHRyeV90b19sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpKToKICAgICAgICAgICAgcHJpbnQoIlVzZXIgbG9naW4gc3VjY2Vzc2Z1bC4iKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KCJVc2VyIGxvZ2luIGZhaWxlZCIpCiAgICAgICAgICAgIHByaW50KCJPZGQsIHRoaXMgd2Vla3MncyBjb2RlIHNob3VsZCBkbyB0aGF0IGFzIGdpdmVuIikKICAgICAgICAgICAgc3lzLmV4aXQoMSkKCiAgICBlbHNlOgogICAgICAgIHByaW50KCJTb3JyeSwgeW91IGhhdmUgbm90IHNvbHZlZCBpdCB5ZXQuIikKICAgICAgICBzeXMuZXhpdCgxKQoKCiAgICAjIHRyeSB0byBjcmVhdGUgYSBibG9nIHBvc3QKICAgIHBvc3QxID0gbWFrZV9zYWx0KDMwKQogICAgdGl0bGUxID0gbWFrZV9zYWx0KDMwKQogICAgdGFnczEgPSBtYWtlX3NhbHQoNSkgKyAiLCAiICsgbWFrZV9zYWx0KDUpICsgIiwgIiArIG1ha2Vfc2FsdCg1KQoKCiAgICBpZiAoYWRkX2Jsb2dfcG9zdCh0aXRsZTEsIHBvc3QxLHRhZ3MxKSk6CiAgICAgICAgcHJpbnQoIlN1Ym1pc3Npb24gb2Ygc2luZ2xlIHBvc3Qgc3VjY2Vzc2Z1bCIpCiAgICBlbHNlOgogICAgICAgIHByaW50KCJVbmFibGUgdG8gY3JlYXRlIGEgcG9zdCIpCiAgICAgICAgc3lzLmV4aXQoMSkKCgogICAgIyB0cnkgdG8gY3JlYXRlIGEgc2Vjb25kIGJsb2cgcG9zdAogICAgcG9zdDIgPSBtYWtlX3NhbHQoMzApCiAgICB0aXRsZTIgPSBtYWtlX3NhbHQoMzApCiAgICB0YWdzMiA9IG1ha2Vfc2FsdCg1KSArICIsICIgKyBtYWtlX3NhbHQoNSkgKyAiLCAiICsgbWFrZV9zYWx0KDUpCgogICAgaWYgKGFkZF9ibG9nX3Bvc3QodGl0bGUyLCBwb3N0Mix0YWdzMikpOgogICAgICAgIHByaW50KCJTdWJtaXNzaW9uIG9mIHNlY29uZCBwb3N0IHN1Y2Nlc3NmdWwiKQogICAgZWxzZToKICAgICAgICBwcmludCgiVW5hYmxlIHRvIGNyZWF0ZSBzZWNvbmQgcG9zdCIpCiAgICAgICAgc3lzLmV4aXQoMSkKCiAgICAjIG5vdyBsZXQncyBtYWtlIHN1cmUgdGhhdCBib3RoIHBvc3RzIGFwcGVhciBvbiB0aGUgaG9tZSBwYWdlIG9mIHRoZSBibG9nLCBpbiB0aGUgY29ycmVjdCBvcmRlcgoKICAgIGlmIChjaGVja19ibG9nX2luZGV4KHRpdGxlMSwgdGl0bGUyKSk6CiAgICAgICAgcHJpbnQoIkJsb2NrIGluZGV4IGxvb2tzIGdvb2QuIikKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoIkJsb2cgaW5kZXggZG9lcyBub3QgaGF2ZSB0aGUgcG9zdHMgcHJlc2VudCwgb3JkZXJlZCBjb3JyZWN0bHkiKQogICAgICAgIHN5cy5leGl0KDEpCgoKICAgICMgY2hlY2sgZm9yIERCIGRhdGEgaW50ZWdyaXR5CiAgICBpZiAobm90IGNoZWNrX21vbmdvX2Zvcl9wb3N0KHRpdGxlMSwgcG9zdDEsIHt9KSk6CiAgICAgICAgcHJpbnQoIkNhbid0IGZpbmQgYmxvZyBwb3N0IGluIGJsb2cgZGIsIHBvc3RzIGNvbGxlY3Rpb24gd2l0aCB0aXRsZSAiLCB0aXRsZSkKICAgICAgICBzeXMuZXhpdCgxKQogICAgZWxzZToKICAgICAgICBwcmludCgiRm91bmQgYmxvZyBwb3N0IGluIHBvc3RzIGNvbGxlY3Rpb24iKQoKCiAgICBwcmludCgiVGVzdHMgUGFzc2VkIGZvciBIVyAzLjIuIFlvdXIgSFcgMy4yIHZhbGlkYXRpb24gY29kZSBpcyA4OWprbGZzanJsazIwOWpma3MyajJlayIpCgogICAgIyBub3cgY2hlY2sgdGhhdCB5b3UgY2FuIHBvc3QgYSBjb21tZW50CiAgICBpZiAobm90IGFkZF9ibG9nX2NvbW1lbnQodGl0bGUxLHBvc3QxKSk6CiAgICAgICAgcHJpbnQoIkNhbid0IGFkZCBibG9nIGNvbW1lbnRzIChzbyBIVyAzLjMgbm90IHlldCBjb21wbGV0ZSkiKQogICAgICAgIHN5cy5leGl0KDEpCiAgICBlbHNlOgogICAgICAgIHByaW50KCJTdWNjZXNzZnVsbHkgYWRkZWQgYmxvZyBjb21tZW50cyIpCgoKICAgIHByaW50KCJUZXN0cyBQYXNzZWQgZm9yIEhXIDMuMy4gWW91ciBIVyAzLjMgdmFsaWRhdGlvbiBjb2RlIGlzIGprMTMxMHZuMmxrdjBqMmtmMGprZnMiKQogICAgCgoKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICBtYWluKHN5cy5hcmd2WzE6XSkKCgoKCgoKCgo='
eval(compile(base64.b64decode(code), "<string>", 'exec'))
